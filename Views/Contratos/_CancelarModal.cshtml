@model inmobiliaria.Models.CancelarContratoDTO
<div class="modal fade" id="modal_cancelacion" tabindex="-1" aria-labelledby="cancelacionModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="cancelacionModalLabel">Detalles del contrato</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        @if(ViewBag.Multa != null && ViewBag.Multa > 0){

        <p>Multa @ViewBag.Multa</p>
          <a class="btn btn-primary" asp-controller="Pagos" asp-action="Formulario" asp-route-idContrato="@ViewBag.IdContrato">Pagar multa</a>
        }
        @if (ViewBag.MesesImpagos !=null && ViewBag.MesesImpagos > 0){

          <p>Tiene @ViewBag.MesesImpagos meses impagos, paguelos antes de cancelar el contrato</p>
        }
        <p>Meses @ViewBag.MesesTranscurridos / @ViewBag.MesesTotales (Meses transcurridos completamente / Totales)</p>
        @if((ViewBag.Multa == null || ViewBag.Multa == 0) && (ViewBag.MesesImpagos == null || ViewBag.MesesImpagos == 0)){
        <form asp-controller="Contratos" asp-action="Cancelar" asp-route-id="@ViewBag.IdContrato" method="post">
          <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        <input type="date" id="fecha_cancelacion" class="form-control" asp-for="FechaCancelacion">
          <input type="hidden" asp-for="IdContrato">
          <span asp-validation-for="FechaCancelacion" class="text-danger" ></span>
          <button type="submit" class="btn btn-primary">Terminar contrato</button>
          </form>

        }
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
